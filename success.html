<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Success!</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <main class="success">
    <div class="wrapper">

      <div class="logo">
        <img src="assets/images/logo-mark.svg" alt="logo">
        <p>Coding Conf</p>
      </div>

      <section class="congrats">
        <div class="congrats">
          <h1>Congrats, <br>
            <span id="name" class="name">Name</span>!
          </h1>
          <p>Your ticket is ready.
          </p>
        </div>

        <p>We've emailed your ticket to <span id="email" class="email">email</span> and will send you updates about the
          event.</p>
      </section>

      <section class="card">
        <div class="glare"></div>
        <div class="wrapper-left">
          <div class="card-top">
            <div class="logo">
              <img src="/assets/images/logo-mark.svg" alt="">
              <h2>Coding Conf</h2>
            </div>

            <p class="date">Jan 31, 2025 / Austin, TX</p>
          </div>

          <div class="ticket-owner">
            <img src="" alt="" id="avatar" class="avatar">
            <h3 class="name"><span id="firstName">First</span> <span id="lastName">Last</span></h3>
            <p class="github">
              <img src="/assets/images/icon-github.svg" alt="">
              <span id="github"></span>
            </p>
          </div>
        </div>
        <div class="wrapper-right">
          <p class="ticket-nr">
            #01976
          </p>
        </div>
      </section>
    </div>

    <p>Go back to the <a href="index.html">home page</a></p>
  </main>

  <script>
    window.addEventListener("DOMContentLoaded", () => {
      const nameSpan = document.querySelector("span#name")
      const emailSpan = document.querySelector("span#email")
      const firstNameSpan = document.querySelector("span#firstName")
      const lastNameSpan = document.querySelector("span#lastName")
      const githubSpan = document.querySelector("span#github")
      const avatarImg = document.querySelector("img#avatar")

      const firstName = sessionStorage.getItem("userFirstName")
      const lastName = sessionStorage.getItem("userLastName")
      const email = sessionStorage.getItem("userEmail")
      const github = sessionStorage.getItem("userGithub")
      const image = sessionStorage.getItem("userImage")

      if (!firstName || !lastName || !email || !image) {
        alert("Geen data gevonden.")
        return
      }

      nameSpan.textContent = `${firstName} ${lastName}`
      emailSpan.textContent = email
      firstNameSpan.textContent = firstName
      lastNameSpan.textContent = lastName
      githubSpan.textContent = github
      avatarImg.src = image
    })

    // card hover effect
    const card = document.querySelector('.card');

    if (card) {
      const glare = card.querySelector('.glare');

      // mousemove on card
      card.addEventListener('mousemove', (e) => {
        const rect = card.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        const centerX = rect.width / 2;
        const centerY = rect.height / 2;
        const rotateLimit = 10;

        // card rotation
        const rotateY = ((x - centerX) / centerX) * rotateLimit;
        const rotateX = ((centerY - y) / centerY) * rotateLimit;

        // set card rotation
        card.style.setProperty('--rotateX', `${rotateX}deg`);
        card.style.setProperty('--rotateY', `${rotateY}deg`);

        // card glare effect
        const percentX = (x / rect.width) * 100;
        const percentY = (y / rect.height) * 100;

        // set glare position
        card.style.setProperty('--glare-x', `${percentX}%`);
        card.style.setProperty('--glare-y', `${percentY}%`);
        card.style.setProperty('--glare-opacity', '.5');
      });

      // reset card on mouse leave
      let leaveTimeout;
      card.addEventListener('mouseleave', () => {
        clearTimeout(leaveTimeout);
        leaveTimeout = setTimeout(() => {
          card.style.setProperty('--rotateX', '0deg');
          card.style.setProperty('--rotateY', '0deg');
          card.style.setProperty('--glare-x', '50%');
          card.style.setProperty('--glare-y', '50%');
          card.style.setProperty('--glare-opacity', '0');
        }, 200);
      });

    }
  </script>

</body>

</html>